# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a weather data analysis project that calculates evaporation rates and power generation potential from weather data. The main application:

1. Fetches weather data from the Open-Meteo API
2. Calculates evaporation rates using psychrometric equations and thermodynamic constants
3. Computes power per area based on humidity differentials and evaporation rates
4. Visualizes the results as time series charts using Altair/Vega-Lite

## Key Files and Architecture

- `main.py`: Core application with all calculation functions and data processing pipeline
- `fetch.sh`: Shell script to download weather data from Open-Meteo API
- `weather-data.csv`: Downloaded weather dataset (generated by fetch.sh)
- `pyproject.toml`: Project dependencies and configuration

The application follows a functional pipeline:

1. `get_df()` - Loads and transforms raw CSV data into processed DataFrame
2. Thermodynamic calculations - `calculate_saturation_vapor_pressure()`, `calculate_Delta()`, `calculate_evaporation_rate()`
3. Power calculations - `calculate_power_per_area()`
4. Visualization - `plot_df()` creates time series charts

## Development Commands

**Install dependencies:**

```bash
uv sync
```

**Run the application:**

```bash
uv run python main.py
```

**Update weather data:**

```bash
./fetch.sh
```

**Linting and formatting:**

```bash
uv run ruff check
uv run ruff format
```

**Development environment (Jupyter):**
The main.py file uses Jupyter cell markers (`# %%`) and can be run interactively.

## Dependencies

- **polars**: DataFrame processing and CSV handling
- **altair**: Data visualization with Vega-Lite
- **vegafusion**: Chart rendering optimization
- **vl-convert-python**: Chart export capabilities
- **ruff**: Code linting and formatting (dev dependency)
- **ipykernel**: Jupyter notebook support (dev dependency)
